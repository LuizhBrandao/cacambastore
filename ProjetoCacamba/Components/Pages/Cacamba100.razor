@page "/Cacamba100"
@inject NavigationManager NavigationManager

<h1>Caçamba de 100L</h1>
<p class="capacity">Capacidade: 100L</p>
<p class="technical-description">
    Medidas: 1m x 1.5m x 1m<br />
    Especificações: Feita de aço reforçado, ideal para transporte de materiais leves.<br />
    Cor: @System.Globalization.CultureInfo.CurrentCulture.TextInfo.ToTitleCase(SelectedColor)
</p>


<!-- Imagem do produto correspondente à cor selecionada -->
<img src="@GetImageForColor(SelectedColor)" alt="Caçamba de 100L - @SelectedColor" />

<!-- Botões de seleção de cor -->
<div class="color-buttons">
    <button data-color="red" @onclick='() => SelectColor("red")'>Vermelho</button>
    <button data-color="blue" @onclick='() => SelectColor("blue")'>Azul</button>
    <button data-color="yellow" @onclick='() => SelectColor("yellow")'>Amarelo</button>
    <button data-color="green" @onclick='() => SelectColor("green")'>Verde</button>
    <button data-color="brown" @onclick='() => SelectColor("brown")'>Marrom</button>
</div>

<!-- Botão Comprar pelo WhatsApp -->
<button class="whatsapp-button" @onclick="BuyViaWhatsApp">Comprar pelo WhatsApp</button>

@code {
    [Parameter]
    public string SelectedColor { get; set; } = "azul";

    protected override void OnInitialized()
    {
        // Obtém a cor da URL, se disponível
        var uri = new Uri(NavigationManager.Uri);
        var query = System.Web.HttpUtility.ParseQueryString(uri.Query);
        SelectedColor = query["color"]?.ToLower() ?? "blue";

    }


    private void SelectColor(string color)
    {
        SelectedColor = color.ToLower();
    }


    private void BuyViaWhatsApp()
    {
        NavigationManager.NavigateTo($"https://wa.me/5551999999999?text=Olá, tenho interesse na caçamba de 100L na cor {SelectedColor}");
    }

    private string GetImageForColor(string color)
    {
        return color switch
        {
            "red" => "./imagem/red100.PNG",
            "blue" => "./imagem/blue100.PNG",
            "yellow" => "./imagem/yellow100.PNG",
            "green" => "./imagem/green100.PNG",
            "brown" => "./imagem/brown100.PNG",
            _ => "./imagem/default100.PNG" // Imagem padrão caso a cor não seja reconhecida
        };
    }
}
